<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rocker Empire</title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
body{margin:0;background:#0e0e0e;color:#fff}
.screen{display:none;padding:16px}
.screen.active{display:block}
h1,h2,h3{text-align:center;margin:10px 0}
button{width:100%;padding:14px;margin:8px 0;background:#b30000;color:#fff;border:none;border-radius:12px;font-size:16px}
button.secondary{background:#333}
.card{background:#1a1a1a;padding:14px;border-radius:14px;margin-bottom:12px}
nav{display:flex;justify-content:space-around;background:#111;position:sticky;top:0}
nav button{background:#222;font-size:14px}
.bar{height:14px;background:#333;border-radius:8px;overflow:hidden;margin:6px 0}
.fill{height:100%}
.green{background:#2ecc71}
.yellow{background:#f1c40f}
.red{background:#e74c3c}
</style>
</head>

<body>

<div id="start" class="screen active">
<h1>ğŸï¸ Rocker Empire</h1>
<button onclick="go('chars')">Spielen</button>
</div>

<div id="chars" class="screen">
<h2>Charaktere</h2>
<div id="charList"></div>
<button onclick="go('create')">+ Neuer Charakter</button>
</div>

<div id="create" class="screen">
<h2>Neuer Charakter</h2>
<input id="nameInput" placeholder="Name">
<select id="ligaInput">
<option value="4">Liga 4 â€“ EinzelgÃ¤nger</option>
<option value="3">Liga 3 â€“ Supporter</option>
</select>
<button onclick="createChar()">Erstellen</button>
</div>

<div id="game" class="screen">
<div class="card" id="hud"></div>
<nav>
<button onclick="tab('char')">ğŸ‘¤</button>
<button onclick="tab('club')">ğŸï¸</button>
<button onclick="tab('map')">ğŸ—ºï¸</button>
<button onclick="tab('war')">âš”ï¸</button>
<button onclick="tab('business')">ğŸ’°</button>
<button onclick="tab('police')">ğŸš“</button>
</nav>

<div id="char" class="tab"></div>
<div id="club" class="tab"></div>
<div id="map" class="tab"></div>
<div id="war" class="tab"></div>
<div id="business" class="tab"></div>
<div id="police" class="tab"></div>
</div>

<script>
/* ========= CORE ========= */
function go(id){
document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
document.getElementById(id).classList.add('active');
}
function tab(id){
document.querySelectorAll('.tab').forEach(t=>t.style.display="none");
document.getElementById(id).style.display="block";
}

/* ========= DATA ========= */
const SAVE="rocker_empire_v8";

const REGIONS=[
{id:"berlin",name:"Berlin",owner:"Bandidos",police:85,econ:90},
{id:"brandenburg",name:"Brandenburg",owner:"Hells Angels",police:60,econ:50},
{id:"sachsen",name:"Sachsen",owner:"Neutral",police:55,econ:45},
{id:"nrw",name:"NRW",owner:"Gremium",police:75,econ:85}
];

let chars=[], current=null;

/* ========= SAVE ========= */
function save(){localStorage.setItem(SAVE,JSON.stringify({chars,REGIONS}))}
function load(){
const d=localStorage.getItem(SAVE);
if(!d)return;
const s=JSON.parse(d);
chars=s.chars||chars;
s.REGIONS?.forEach((r,i)=>REGIONS[i].owner=r.owner);
}

/* ========= CHAR ========= */
function createChar(){
chars.push({
name:nameInput.value||"Rider",
liga:+ligaInput.value,
level:1,xp:0,ace:0,
money: ligaInput.value==4?800:3000,
aura:0,
members: ligaInput.value==4?1:8,
chapters:[],
police:50
});
save(); renderChars(); go('chars');
}
function renderChars(){
charList.innerHTML="";
chars.forEach((c,i)=>{
const b=document.createElement("button");
b.textContent=`${c.name} (Lvl ${c.level})`;
b.onclick=()=>{current=i;renderGame();go('game')};
charList.appendChild(b);
});
}

/* ========= GAME ========= */
function renderGame(){
const p=chars[current];
hud.textContent=`${p.name} | Liga ${p.liga} | Lvl ${p.level} | â‚¬${p.money}`;

char.innerHTML=`Aura: ${p.aura}<br>XP: ${p.xp}/100`;

club.innerHTML=`
Mitglieder: ${p.members}<br>
Chapter: ${p.chapters.length}<br>
<button onclick="recruit()">Mitglied rekrutieren</button>
<button onclick="buyChapter()">Chapter kaufen</button>`;

map.innerHTML="";
REGIONS.forEach(r=>{
map.innerHTML+=`<div class="card">${r.name}<br>Besitzer: ${r.owner}</div>`;
});

war.innerHTML=`<button onclick="attackRegion()">Region angreifen</button>`;

business.innerHTML=`
<button onclick="drug()">Drogenhandel</button>
${p.liga==1?'<button onclick="weapon()">Waffenhandel</button>':""}`;

police.innerHTML=`
Schutz: ${p.police}%
<input type="range" min="0" max="100" value="${p.police}"
oninput="p.police=this.value;renderGame()">`;
}

/* ========= ACTIONS ========= */
function recruit(){
const p=chars[current];
if(p.money<1500)return alert("Zu wenig Geld");
p.money-=1500;p.members++;gainXP(10);renderGame();save();
}
function buyChapter(){
const p=chars[current];
if(p.members<6)return alert("6 Mitglieder nÃ¶tig");
if(p.money<25000)return alert("Zu wenig Geld");
const r=prompt("Region: Berlin / Brandenburg / Sachsen / NRW");
const reg=REGIONS.find(x=>x.name.toLowerCase()==r?.toLowerCase());
if(!reg)return;
p.money-=25000;p.chapters.push(reg.id);renderGame();save();
}
function attackRegion(){
const p=chars[current];
const target=REGIONS.find(r=>r.owner!=="Player");
if(!target)return alert("Kein Ziel");
const chance=30+p.aura+p.level*2;
if(Math.random()*100<chance){
target.owner="Player";p.money+=target.econ*100;p.aura+=10;gainXP(30);
}else{p.members=Math.max(1,p.members-1)}
aiTurn();renderGame();save();
}
function drug(){const p=chars[current];p.money+=5000;p.police+=10;gainXP(5);renderGame();save();}
function weapon(){const p=chars[current];p.money+=15000;p.police+=20;gainXP(10);renderGame();save();}

/* ========= XP ========= */
function gainXP(x){
const p=chars[current];
p.xp+=x;
if(p.xp>=100){
p.xp=0;p.level++;p.aura+=5;
}
}

/* ========= AI ========= */
function aiTurn(){
REGIONS.forEach(r=>{
if(r.owner==="Player" && Math.random()<0.2){
r.owner=["Hells Angels","Bandidos","Gremium"][Math.floor(Math.random()*3)];
}
});
}

/* ========= INIT ========= */
load();renderChars();
</script>

</body>
</html>
