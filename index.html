<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter App</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header id="topBar" class="hidden">
  <span id="rankLabel"></span> |
  <span id="userName"></span> |
  Punkte: <span id="points"></span>
</header>

<div class="container" id="loginScreen">
  <div class="card">
    <h3>Login</h3>
    <input id="email" type="email" placeholder="Email">
    <input id="password" type="password" placeholder="Passwort">
    <button id="loginBtn">Login</button>
    <p id="status"></p>
  </div>
</div>

<div class="container hidden" id="homeScreen">
  <div class="card">

    <button id="debugButton">DEBUG BUTTON</button>

    <button onclick="showScreen('infos')">ğŸ“¢ Infos</button>
    <button onclick="showScreen('rides')">ğŸ Ausfahrten</button>
    <button onclick="showScreen('notes')">ğŸ“ Notizen</button>
    <button onclick="showScreen('tasks')">ğŸ“‹ Aufgaben</button>

    <!-- âœ… Wichtig: Secretary muss Ã¼ber showSecretaryPanel laufen -->
    <button onclick="showSecretaryPanel()">ğŸ“’ Secretary</button>

    <button onclick="showScreen('calc')">ğŸ§® Rechner</button>
    <button onclick="showScreen('files')">ğŸ“ Dateien</button>
    <button onclick="logout()">ğŸšª Logout</button>
  </div>
</div>

<!-- âœ… INFOS -->
<div class="container hidden" id="infos">
  <div class="card">
    <h3>Infos</h3>

    <!-- optional: nur FÃ¼hrung sieht den Button, wird per JS eingeblendet -->
    <textarea id="newInfoText" placeholder="Neue Info..."></textarea>
    <button id="postInfoBtn" class="hidden">Info posten</button>

    <!-- âœ… Warn Info Button + Box -->
    <button type="button" onclick="toggleWarnInfo()">âš ï¸ Warn Info</button>

    <div id="warnInfoBox" class="card hidden" style="margin-top:10px;">
      <h3>ğŸ“œ Rang-, Warn-, Sperren- & Bereinigungsregeln</h3>

      <h4>1) RÃ¤nge & FÃ¼hrerschein</h4>
      <ul>
        <li>RÃ¤nge <b>Ã¼ber â€Memberâ€œ</b> sind nur erlaubt, wenn mindestens <b>ein gÃ¼ltiger FÃ¼hrerschein</b> vorliegt.</li>
        <li><b>Ohne FÃ¼hrerschein</b> ist der hÃ¶chste Rang <b>â€Memberâ€œ</b>.</li>
        <li>Rangaufstiege Ã¼ber â€Memberâ€œ sind bis zum Vorliegen eines FÃ¼hrerscheins <b>ausgeschlossen</b>.</li>
        <li><b>Ausnahmen gibt es nicht.</b></li>
      </ul>

      <h4>2) Warns â€“ Grundlagen</h4>
      <ul>
        <li>Es gibt insgesamt <b>1 bis 4 Warns</b> (aktive Warns).</li>
        <li>Ab <b>2 Warns</b> gilt automatisch:
          <ul>
            <li><b>12 Monate Rangsperre</b></li>
            <li>In dieser Zeit ist <b>kein Rangaufstieg</b> mÃ¶glich</li>
          </ul>
        </li>
        <li>Alle Warns werden <b>intern dokumentiert</b> und bleiben nachvollziehbar vermerkt.</li>
      </ul>

      <h4>3) Warn-Stufen (Kategorien)</h4>

      <div class="card warn-w1">
        <b>ğŸŸ¡ W.S1 â€“ Warnstufe 1 (leicht bis mittel)</b>
        <ul>
          <li>Leichte bis mittlere VerstÃ¶ÃŸe</li>
          <li>Ein einzelner W.S1 fÃ¼hrt <b>niemals</b> direkt zum Ausschluss</li>
          <li>Dient als klare Verwarnung und LernmaÃŸnahme</li>
        </ul>
      </div>

      <div class="card warn-w2">
        <b>ğŸ”´ W.S2 â€“ Warnstufe 2 (schwerwiegend)</b>
        <ul>
          <li>Schwere VerstÃ¶ÃŸe</li>
          <li>Maximal <b>2Ã— im gesamten Clubverlauf</b></li>
          <li>Vergabe nur durch <b>FÃ¼hrung / Abstimmung</b></li>
        </ul>
        <b>Folgen bei W.S2:</b>
        <ul>
          <li><b>1. W.S2:</b> in der Regel Rang-Down auf Hangaround + Neustart</li>
          <li><b>2. W.S2:</b> zwingender Ausschluss aus dem Club</li>
        </ul>
      </div>

      <h4>4) Kombination W.S2 + weiterer Warn (WICHTIG)</h4>
      <ul>
        <li>Nach einem bereits vergebenen W.S2 kann ein weiteres Vergehen (auch W.S1) bereits zum <b>direkten Ausschluss</b> fÃ¼hren.</li>
        <li>Grund: schwere Vorbelastung durch W.S2.</li>
      </ul>

      <h4>5) Folgen nach Anzahl der Warns</h4>
      <ul>
        <li><b>1. Warn:</b> Keine direkte Sanktion, keine RangÃ¤nderung, kein Ausschluss (solange kein W.S2 vorliegt).</li>
        <li><b>2. Warn:</b> Automatische 12-Monats-Rangsperre + je nach Vergehen zusÃ¤tzliche EinschrÃ¤nkungen.</li>
        <li><b>3. Warn:</b> Zwingender Rang-Down (Member oder hÃ¶her â†’ Hangaround) + Neustart erforderlich.</li>
        <li><b>4. Warn:</b> Zwingender Ausschluss, Entscheidung endgÃ¼ltig.</li>
      </ul>

      <h4>6) RÃ¼ckgÃ¤ngigmachung & Bereinigung</h4>
      <ul>
        <li>ÃœberprÃ¼fung/Bereinigung/Erledigt nur durch gemeinsame Zustimmung von: <b>President, Vice President, Sergeant-at-Arms</b>.</li>
        <li><b>W.S1</b> kann nach <b>12 Monaten</b> als erledigt markiert werden (bleibt intern vermerkt, zÃ¤hlt aber nicht mehr aktiv).</li>
        <li><b>W.S1</b> (leichte VerstÃ¶ÃŸe) kann Ã¼ber Clubkasse bereinigt werden (Summe X): bleibt vermerkt, zÃ¤hlt nicht mehr aktiv.</li>
      </ul>

      <b>âŒ Keine Bereinigung bei:</b>
      <ul>
        <li>W.S2</li>
        <li>4. Warn</li>
        <li>bereits ausgesprochenem Ausschluss</li>
      </ul>
    </div>

    <h3>Aktuelle Infos</h3>
    <div id="infosList"></div>

    <button onclick="backHome()">â¬… ZurÃ¼ck</button>
  </div>
</div>

<!-- âœ… EINZIGER NOTIZEN SCREEN -->
<div class="container hidden" id="notes">
  <div class="card">

    <textarea id="noteText" placeholder="Notiz"></textarea>

    <select id="noteType">
      <option value="privat">Privat</option>
      <option value="club">Club Info</option>
      <option value="wichtig">Wichtig</option>
      <option value="auftrag">Auftrag</option>
    </select>

    <select id="noteTarget">
      <option value="">Nur fÃ¼r mich speichern</option>
    </select>

    <button id="saveNoteBtn">Speichern</button>

    <h3>Meine Notizen</h3>
    <div id="myNotes"></div>

    <button onclick="backHome()">â¬… ZurÃ¼ck</button>
  </div>
</div>

<!-- âœ… RIDES -->
<div class="container hidden" id="rides">
  <div class="card">
    <h3>Ausfahrten</h3>
    <div id="ridesList"></div>

    <textarea id="rideText" placeholder="Neue Ausfahrt"></textarea>

    <select id="ridePriority">
      <option value="1">Locker</option>
      <option value="2">Wichtig</option>
      <option value="3">Pflicht</option>
    </select>

    <button id="createRideBtn" class="hidden">Speichern</button>

    <button onclick="backHome()">â¬… ZurÃ¼ck</button>
  </div>
</div>

<!-- âœ… TASKS -->
<div class="container hidden" id="tasks">
  <div class="card">
    <h3>Aufgaben</h3>

    <textarea id="taskText" placeholder="Neue Aufgabe"></textarea>

    <select id="taskTarget">
      <option value="">An mich selbst</option>
    </select>

    <button id="createTaskBtn">Speichern</button>

    <h3>Offene Aufgaben</h3>
    <div id="taskList"></div>

    <button onclick="backHome()">â¬… ZurÃ¼ck</button>
  </div>
</div>

<!-- âœ… SECRETARY SCREEN -->
<div class="container hidden" id="secretaryScreen">
  <div class="card">

    <!-- Button-Leiste -->
    <div class="card" style="margin-bottom:10px; display:flex; gap:8px; flex-wrap:wrap;">
      <button type="button" onclick="secShow('secMember')">ğŸ‘ï¸ Member Beobachtung</button>
      <button type="button" onclick="secShow('secMeetings')">ğŸ—“ï¸ Besprechungsverlauf</button>
    </div>

    <!-- TAB 1: Member Beobachtung -->
    <div id="secMember">
      <h3>Member Beobachtung</h3>

      <input id="secName" placeholder="Name">
      <input id="secJoinDate" type="date">

      <select id="secStartRank">
        <option value="supporter">Supporter</option>
        <option value="hangaround">Hangaround</option>
        <option value="prospect">Prospect</option>
        <option value="member">Member</option>
      </select>

      <input id="secContribution" type="number" step="0.01" placeholder="Club Beitrag â‚¬">

      <h4>Warnstufen</h4>
      <label><input type="checkbox" id="warn1"> W.1</label>
      <label><input type="checkbox" id="warn2"> W.2</label>
      <textarea id="warnText" placeholder="Warn Details"></textarea>

      <h4>Herkunft</h4>
      <input id="secSponsor" placeholder="Vorgestellt von">
      <label>
        <input type="checkbox" id="selfJoined">
        Selbst zum Club gekommen
      </label>

      <textarea id="secNotes" placeholder="Notizen"></textarea>
      <button type="button" id="saveMemberObservation">Speichern</button>

      <h3>EintrÃ¤ge</h3>
      <div id="secEntries"></div>

      <h3>Akte</h3>
      <div id="secDetail"></div>

      <h3>Timeline Eintrag</h3>
      <input id="timelineDate" type="date">
      <input id="timelineRank" placeholder="Rang / Ereignis">
      <textarea id="timelineText" placeholder="Was ist passiert?"></textarea>
      <button type="button" id="addTimelineEntry">Eintrag speichern</button>
    </div>

    <!-- TAB 2: Besprechungsverlauf -->
    <div id="secMeetings" class="hidden">
      <h3>Besprechungsverlauf</h3>

      <input id="meetDate" type="date">
      <input id="meetTitle" placeholder="Welche Besprechung / Titel (z.B. Monatsmeeting, Vorstand, auÃŸerplanmÃ¤ÃŸig)">

      <textarea id="meetAgenda" placeholder="Themen / Tagesordnung"></textarea>
      <textarea id="meetNotes" placeholder="Protokoll: Was wurde besprochen?"></textarea>

      <h4>Abstimmung</h4>
      <input id="voteTopic" placeholder="Worum geht die Abstimmung?">
      <input id="voteOptions" placeholder="Optionen (z.B. Ja/Nein oder A,B,C)">
      <input id="voteResult" placeholder="Ergebnis (z.B. 7 Ja / 2 Nein / 1 Enthaltung)">

      <h4>Betroffene Person(en)</h4>
      <input id="meetPersons" placeholder="Namen (kommagetrennt)">

      <h4>Teilnehmer</h4>
      <input id="meetAttendees" placeholder="Wer war da? (kommagetrennt)">

      <h4>Follow-ups / Aufgaben</h4>
      <textarea id="meetFollowups" placeholder="Was ist als nÃ¤chstes zu tun? Wer macht was?"></textarea>

      <select id="meetStatus">
        <option value="open">Offen</option>
        <option value="done">Erledigt</option>
      </select>

      <button type="button" id="saveMeetingBtn">Besprechung speichern</button>

      <h3>Protokolle</h3>
      <div id="meetingList"></div>
    </div>

    <button type="button" onclick="backHome()">â¬… ZurÃ¼ck</button>

  </div>
</div>

<!-- âœ… RECHNER -->
<div class="container hidden" id="calc">
  <div class="card">
    <input id="calcDisplay" placeholder="Rechnung">
    <button id="calcBtn">Berechnen</button>
    <button id="saveCalcBtn">Speichern</button>
    <button onclick="backHome()">â¬… ZurÃ¼ck</button>
  </div>
</div>

<!-- âœ… DATEIEN -->
<div class="container hidden" id="files">
  <div class="card">
    <h3>Dateien</h3>
    <div id="filesNotes"></div>
    <div id="filesCalcs"></div>
    <button onclick="backHome()">â¬… ZurÃ¼ck</button>
  </div>
</div>

<script type="module" src="firebase.js"></script>
<script type="module" src="app.js"></script>

</body>
</html>
